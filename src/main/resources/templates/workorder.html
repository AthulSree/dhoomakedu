<html layout:decorate="~{base}">

<div layout:fragment="content">


    <!-- Frosted Glass Form -->
    <div class="frost-form-wrapper frost-glass" style="width:17em">
        <h2 class="frost-form-title">Î½ Work Order? </h2>
        <form class="frost-form" action="#" th:action="@{/workorder/saveWorkorder}" th:object="${workorder}" method="POST">

            <input type="hidden" th:field="*{id}" />

            <div class="frost-form-row" style="display: flex; gap: 20px;">
                <div class="frost-form-group"  style="flex: 1;">
                    <label class="frost-form-label" for="name">Name</label>
                    <select class="form-select frost-form-input" aria-label="Default select example" id="name"
                            th:field="*{empId}" required>
                        <option th:each="emp : ${emp_list}"
                                th:value="${emp.id}"
                                th:text="${emp.first_name}">
                        </option>
                    </select>
                </div>

                <div class="frost-form-group"  style="flex: 1;">
                    <label class="frost-form-label" for="agency">Agency</label>
                    <select class="form-select frost-form-input" id="agency" aria-label="Default select example" th:field="*{agency}" required>
                        <option value="AEOLOGIC">AEOLOGIC</option>
                        <option value="AKAL">AKAL</option>
                    </select>
                </div>
            </div>

            <div class="frost-form-group">
                <label class="frost-form-label" for="joinDate">Joining Date</label>
                <input class="frost-form-input" type="date" id="joinDate" th:field="*{joinDate}" required>
            </div>

            <div class="frost-form-row" style="display: flex; gap: 20px;">
                <div class="frost-form-group " style="flex:1;width:48%">
                    <label class="frost-form-label" for="woNumber">WorkOrder No</label>
                    <input class="frost-form-input" type="text" id="woNumber" th:field="*{woNumber}" required>
                </div>

                <div class="frost-form-group" style="flex:1;width:48%">
                    <label class="frost-form-label" for="projectNo">Project Number</label>
                    <input class="frost-form-input" type="text" id="projectNo" th:field="*{projectNo}" required>
                </div>
            </div>

                <div class="frost-form-group" style="flex:1">
                    <label class="frost-form-label" for="designation">Designation</label>
                    <input class="frost-form-input" type="text" id="designation" th:field="*{designation}" required>
                </div>


                <div class="frost-form-group">
                    <label class="frost-form-label" for="woFromDate">From Date</label>
                    <input class="frost-form-input" type="date" id="woFromDate" th:field="*{woFromDate}" required>
                </div>

                <div class="frost-form-group">
                    <label class="frost-form-label" for="woToDate">To Date</label>
                    <input class="frost-form-input" type="date" id="woToDate" th:field="*{woToDate}" multiple required>
                </div>

            <div class="frost-form-actions">
                <button type="submit" class="frost-form-btn frost-btn-primary">Save</button>
                <button type="reset" class="frost-form-btn frost-btn-secondary">Reset</button>
            </div>
        </form>
    </div>


<!--    table-->

    <div class="frost-table-wrapper">
        <h1 class="frost-table-title">Work Order List</h1>

        <div class="frost-glass" style="width:60em">
            <div class="frost-table-scroll">
                <table class="frost-table">
                    <thead>
                    <tr>
                        <th style="width:5%">Sl</th>
                        <th style="width:15%">Employee</th>
                        <th style="width:5%">Agency</th>
                        <th style="width:11%">Project No.</th>
                        <th style="width:12%">Work Order No.</th>
                        <th style="width:10%">Designation</th>
                        <th style="width:9%">Join Date</th>
                        <th style="width:24%">WO Period</th>
                        <th style="width:10%">Action</th>
                    </tr>

                    </thead>
                    <tbody>
                    <tr th:each="temp_wo, iterstat : ${wo_list}">
                        <th class="sticky-col" th:text="${iterstat.count}"></th>
                        <td th:text="${temp_wo.empId.first_name}"></td>
                        <td th:text="${temp_wo.agency == 'AEOLOGIC' ? 'AEO' : (temp_wo.agency == 'AKAL' ? 'AKL' : temp_wo.agency)}"></td>
                        <td th:text="${temp_wo.projectNo}"></td>
                        <td th:text="${temp_wo.woNumber}"></td>
                        <td th:text="${temp_wo.designation}"></td>
                        <td th:text="${#temporals.format(temp_wo.joinDate, 'dd-MM-yyyy')}"  style="white-space: nowrap;"></td>
                        <td class="text-center">
                            <span th:text="${#temporals.format(temp_wo.woFromDate, 'dd-MM-yyyy')}"></span>
                            <br>to<br>
                            <span th:text="${#temporals.format(temp_wo.woToDate, 'dd-MM-yyyy')}"></span>
                        </td>

                        <!-- Add update button/link -->
                        <td>
                            <a th:href="@{/workorder/updateFormWorkorder(woId=${temp_wo.id})}"
                               class="btn btn-info btn-sm">
                                Update
                            </a>
<!--                            <a th:href="@{/employee/deleteEmployee(employeeId=${temp_emp.id})}"-->
<!--                               class="btn btn-danger btn-sm">-->
<!--                                <i class="fa-solid fa-trash fa-1x"></i>-->
<!--                            </a>-->

                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>





</div>
</html>